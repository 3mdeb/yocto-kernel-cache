From c2a3acc5a9fa1c0b099c44443cf253e4642b87cb Mon Sep 17 00:00:00 2001
From: David Mercado <david.mercado@windriver.com>
Date: Tue, 19 Nov 2013 18:49:50 -0500
Subject: [PATCH 142/158] kmap_types.h: Limit KM_TYPE_NR to 15 for systems with
 16 or more cores

Signed-off-by: Eddy Raineri <eddy.raineri@windriver.com>
---
 arch/arm/include/asm/kmap_types.h | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/arch/arm/include/asm/kmap_types.h b/arch/arm/include/asm/kmap_types.h
index 83eb2f7..3e527f9 100644
--- a/arch/arm/include/asm/kmap_types.h
+++ b/arch/arm/include/asm/kmap_types.h
@@ -4,6 +4,11 @@
 /*
  * This is the "bare minimum".  AIO seems to require this.
  */
+#if (NR_CPUS > 15)
+/* Prevent overlap between fixmap mapping and CPU vector page for 16th core */
+#define KM_TYPE_NR 15
+#else
 #define KM_TYPE_NR 16
+#endif
 
 #endif
-- 
1.8.1.2

